import{q as I,s as Te,x as je,y as Se,z as G,g as S,o as k,a as v,d as q,h as ke,w as _,b as r,i as ee,k as qe,m as Oe,l as N,f as R,F as te,p as Ie,t as x}from"./app-XSlxjz1o.js";import{_ as Ne}from"./AuthenticatedLayout-O4Q_S9tv.js";import"./ApplicationLogo-CfnQIXXg.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";var L,re;function pe(){if(re)return L;re=1;function e(n){var o=typeof n;return n!=null&&(o=="object"||o=="function")}return L=e,L}var F,ne;function Re(){if(ne)return F;ne=1;var e=typeof I=="object"&&I&&I.Object===Object&&I;return F=e,F}var A,ie;function xe(){if(ie)return A;ie=1;var e=Re(),n=typeof self=="object"&&self&&self.Object===Object&&self,o=e||n||Function("return this")();return A=o,A}var $,se;function Ee(){if(se)return $;se=1;var e=xe(),n=function(){return e.Date.now()};return $=n,$}var B,ae;function Ce(){if(ae)return B;ae=1;var e=/\s/;function n(o){for(var u=o.length;u--&&e.test(o.charAt(u)););return u}return B=n,B}var P,oe;function De(){if(oe)return P;oe=1;var e=Ce(),n=/^\s+/;function o(u){return u&&u.slice(0,e(u)+1).replace(n,"")}return P=o,P}var M,ue;function ye(){if(ue)return M;ue=1;var e=xe(),n=e.Symbol;return M=n,M}var V,de;function Ge(){if(de)return V;de=1;var e=ye(),n=Object.prototype,o=n.hasOwnProperty,u=n.toString,c=e?e.toStringTag:void 0;function g(a){var t=o.call(a,c),s=a[c];try{a[c]=void 0;var i=!0}catch{}var l=u.call(a);return i&&(t?a[c]=s:delete a[c]),l}return V=g,V}var W,ce;function Le(){if(ce)return W;ce=1;var e=Object.prototype,n=e.toString;function o(u){return n.call(u)}return W=o,W}var U,le;function Fe(){if(le)return U;le=1;var e=ye(),n=Ge(),o=Le(),u="[object Null]",c="[object Undefined]",g=e?e.toStringTag:void 0;function a(t){return t==null?t===void 0?c:u:g&&g in Object(t)?n(t):o(t)}return U=a,U}var z,fe;function Ae(){if(fe)return z;fe=1;function e(n){return n!=null&&typeof n=="object"}return z=e,z}var H,me;function $e(){if(me)return H;me=1;var e=Fe(),n=Ae(),o="[object Symbol]";function u(c){return typeof c=="symbol"||n(c)&&e(c)==o}return H=u,H}var X,ge;function Be(){if(ge)return X;ge=1;var e=De(),n=pe(),o=$e(),u=NaN,c=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,a=/^0o[0-7]+$/i,t=parseInt;function s(i){if(typeof i=="number")return i;if(o(i))return u;if(n(i)){var l=typeof i.valueOf=="function"?i.valueOf():i;i=n(l)?l+"":l}if(typeof i!="string")return i===0?i:+i;i=e(i);var f=g.test(i);return f||a.test(i)?t(i.slice(2),f?2:8):c.test(i)?u:+i}return X=s,X}var Z,be;function Pe(){if(be)return Z;be=1;var e=pe(),n=Ee(),o=Be(),u="Expected a function",c=Math.max,g=Math.min;function a(t,s,i){var l,f,y,h,m,p,w=0,J=!1,T=!1,E=!0;if(typeof t!="function")throw new TypeError(u);s=o(s)||0,e(i)&&(J=!!i.leading,T="maxWait"in i,y=T?c(o(i.maxWait)||0,s):y,E="trailing"in i?!!i.trailing:E);function C(d){var b=l,j=f;return l=f=void 0,w=d,h=t.apply(j,b),h}function he(d){return w=d,m=setTimeout(O,s),J?C(d):h}function ve(d){var b=d-p,j=d-w,Y=s-b;return T?g(Y,y-j):Y}function K(d){var b=d-p,j=d-w;return p===void 0||b>=s||b<0||T&&j>=y}function O(){var d=n();if(K(d))return Q(d);m=setTimeout(O,ve(d))}function Q(d){return m=void 0,E&&l?C(d):(l=f=void 0,h)}function _e(){m!==void 0&&clearTimeout(m),w=0,l=p=f=m=void 0}function we(){return m===void 0?h:Q(n())}function D(){var d=n(),b=K(d);if(l=arguments,f=this,p=d,b){if(m===void 0)return he(p);if(T)return clearTimeout(m),m=setTimeout(O,s),C(p)}return m===void 0&&(m=setTimeout(O,s)),h}return D.cancel=_e,D.flush=we,D}return Z=a,Z}var Me=Pe();const Ve=Te(Me),We={class:"py-12"},Ue={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ze={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6"},He={class:"flex justify-between items-center mb-4"},Xe={class:"flex space-x-2"},Ze={class:"overflow-x-auto"},Je={class:"min-w-full divide-y divide-gray-200"},Ke={class:"bg-white divide-y divide-gray-200"},Qe={key:0},Ye={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},et={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},tt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},rt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},nt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},it={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 max-w-xs truncate"},st={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 max-w-xs truncate"},at={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ot=["onClick"],ut={key:0,class:"mt-4 flex justify-between items-center","aria-label":"Pagination"},dt={class:"flex-1 flex justify-between sm:justify-end"},ct=["disabled"],lt=["disabled"],pt={__name:"Index",props:{customers:Object,filters:Object},setup(e){const o=je(e.filters.search||"");Se(o,Ve(a=>{G.get(route("customers.index"),{search:a},{preserveState:!0,replace:!0})},300));const u=a=>{if(!a||typeof a!="string")return"N/A";const t=a.split("-");if(t.length!==3)return"Fecha no válida";const s=parseInt(t[0],10),i=parseInt(t[1],10),l=parseInt(t[2],10);if(isNaN(s)||isNaN(i)||isNaN(l))return"Fecha no válida";const f=new Date(Date.UTC(s,i-1,l));if(isNaN(f.getTime()))return"Fecha no válida";const y={year:"numeric",month:"long",day:"numeric",timeZone:"UTC"};return f.toLocaleDateString("es",y)},c=a=>{a&&G.get(a,{search:o.value},{preserveState:!0,replace:!0})},g=a=>{confirm(`¿Estás seguro de que quieres eliminar a ${a.full_name}?`)&&G.delete(route("customers.destroy",a.id),{preserveScroll:!0})};return(a,t)=>(k(),S(te,null,[v(q(ke),{title:"Clientes"}),v(Ne,null,{header:_(()=>t[3]||(t[3]=[r("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Clientes",-1)])),default:_(()=>[r("div",We,[r("div",Ue,[r("div",ze,[r("div",He,[qe(r("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>o.value=s),placeholder:"Buscar clientes...",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm w-1/3"},null,512),[[Oe,o.value]]),r("div",Xe,[v(q(N),{href:a.route("customers.import.create"),class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-500 focus:bg-green-500 active:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:_(()=>t[4]||(t[4]=[R(" Subir Excel ",-1)])),_:1,__:[4]},8,["href"]),v(q(N),{href:a.route("customers.create"),class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:_(()=>t[5]||(t[5]=[R(" Añadir Cliente ",-1)])),_:1,__:[5]},8,["href"])])]),r("div",Ze,[r("table",Je,[t[9]||(t[9]=r("thead",{class:"bg-gray-50"},[r("tr",null,[r("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID Cliente"),r("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nombre Completo"),r("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Correo Electrónico"),r("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Teléfono Móvil"),r("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Fecha Nacimiento"),r("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Obs. Telemarketing"),r("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Obs. Asesor"),r("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones")])],-1)),r("tbody",Ke,[e.customers.data.length===0?(k(),S("tr",Qe,t[6]||(t[6]=[r("td",{colspan:"8",class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center"}," No hay clientes para mostrar. ",-1)]))):ee("",!0),(k(!0),S(te,null,Ie(e.customers.data,s=>(k(),S("tr",{key:s.id},[r("td",Ye,x(s.customer_id),1),r("td",et,x(s.full_name),1),r("td",tt,x(s.email),1),r("td",rt,x(s.mobile_phone),1),r("td",nt,x(u(s.birthday)),1),r("td",it,x(s.telemarketing_observations),1),r("td",st,x(s.advisor_observations),1),r("td",at,[v(q(N),{href:a.route("customers.show",s.id),class:"text-blue-600 hover:text-blue-900 mr-2"},{default:_(()=>t[7]||(t[7]=[R("Ver",-1)])),_:2,__:[7]},1032,["href"]),v(q(N),{href:a.route("customers.edit",s.id),class:"text-indigo-600 hover:text-indigo-900 mr-2"},{default:_(()=>t[8]||(t[8]=[R("Editar",-1)])),_:2,__:[8]},1032,["href"]),r("button",{onClick:i=>g(s),class:"text-red-600 hover:text-red-900"},"Eliminar",8,ot)])]))),128))])])]),e.customers.links.length>3?(k(),S("nav",ut,[r("div",dt,[r("button",{onClick:t[1]||(t[1]=s=>c(e.customers.prev_page_url)),disabled:!e.customers.prev_page_url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Anterior ",8,ct),r("button",{onClick:t[2]||(t[2]=s=>c(e.customers.next_page_url)),disabled:!e.customers.next_page_url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Siguiente ",8,lt)])])):ee("",!0)])])])]),_:1})],64))}};export{pt as default};
